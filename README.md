
# Observer
팀원 김지훈, 배민한

## 설명
### 서버와 데이터 베이스
데이터베이스는 mongodb를 사용하여서 {idnum(앱 사용자의 id),  name(저장되는 사람의 이름), num(저장되는 사람의 전화번호), friendy(저장되는 사람과의 친밀도), specialkey(해당 데이터를 찾는 key)}의 형태의 json파일로 정보를 저장하게 하도록 하였다. 친밀도는 이름 그대로 친밀도를 저장하는 역할을 하기도 하지만 어느 종류의 데이터를 저장하는지 나타내는 determinent의 역할을 하기도 한다. (fridny>=0 : 연락처, friendy=-1: 사진, friendy=-3:위치정보를 나타낸다.) 서버는 nodejs를 사용하여서 mongoose를 이용하여 mongoDB와 연동하였다. 서버에서 route.js에서 각각의 정보들을 추가하거나 삭제하거나 업데이트 하거나 검색하는 함수들을 만들었고 안드로이드 스튜디오에서 그것들을 사용하는 함수를 만들어 서버와 안드로이드 스튜디오가 상호작용 하도록 하였다. 

### 로그인
Facebook SDK를 사용하여서 페이스북 로그인을 통해 앱을 사용할 수 있게 하였다. 로그인이 성공하면은 페이스북 서버로부터 로그인한 유서의 프로필을 getCurrentProfile을 통해 얻어내었다.<br>
그리고 프로필에서 11자리의 유저 id를 프로필에서 골라 앱에서 사용자를 구분짓는 key로 사용하였다.
### TAB1 : 연락처
접속한 유저의 id와 데이터베이스의 idnum이 일치하는 데이터들을 서버에서 불러와 listView로 name들을 나타내었다.<br>
아래의 add버튼을 통해 서버에 연락처 정보를 추가할 수 있고 listview의 item을 옆으로 swipe하면 수정 또는 삭제가 가능하다.<br>
그기로 item을 클릭하면 그에 해당하는 이름, 전화번호, 그리고 친밀도를 알 수 있다.
### TAB2 : 갤러리
Bitmap을 사용하여서 이미지를 String으로 변환하여 서버에 저장하는 방식으로 사진을 데이터베이스에 저장하였다.<br>
이 탭에서는 접속한 유저가 올렸던 사진들을 idnum을 통해 받아와서 gridView를 통해 나타나고 그 사진들을 클릭하면 확대해서 볼 수 있다.<br>
또한 휴대폰 저장소에서 사진들을 골라 업로드가 가능하고 사진을 누르고 삭제 버튼을 누르면 서버에서 그 사진을 없앨 수 있다.
### TAB3 : 위치공유
이름을 설정하여서 자신의 현재 위치를 공유함과 동시에 그 기능을 켠 다른 어플리케이션 유저의 위치를 공유 받을 수 있다.<br>
이름을 설정할 때 아무것도 입력하지 않으면 "Noname+id의 첫 세자리수"로 이름이 자동 생성되고 위치가 공유 중인 경우에는 이름을 바꿀 수 없다.<br>
서로의 위치를 공유할 때 다른 사람의 위치가 10초마다 업데이트 되고 그 때 그 사람의 위치가 마커로 표시되며 그 마커를 누르면 이름과 위치의 주소를 알 수 있다.


## 권한
TAB2에서는 휴대폰 저장소의 사진을 업로드하기 위해 저장소 접근에 대한 권한이 필요함.<br>
TAB3에서는 현재 나의 위치를 표시하고 공유하기 위치 기능 접근에 대한 권한이 필요함.
